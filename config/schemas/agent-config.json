{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/Traceable/agent-config/schema/agent-config.json",
  "definitions": {
    "logging": {
      "type": "object",
      "properties": {
        "level": {
          "type": "string",
          "default": "info"
        },
        "development": {
          "type": "boolean",
          "default": false
        },
        "encoding": {
          "type": "string",
          "default": "json"
        },
        "outputPaths": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "errorOutputPaths": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "encoderConfig": {
          "type": "object",
          "properties": {
            "timeKey": {
              "type": "string",
              "default": "time"
            },
            "timeEncoder": {
              "type": "string",
              "default": "iso8601"
            },
            "levelKey": {
              "type": "string",
              "default": "level"
            },
            "levelEncoder": {
              "type": "string",
              "default": "uppercase"
            },
            "messageKey": {
              "type": "string",
              "default": "message"
            }
          }
        }
      }
    },
    "reporting": {
      "type": "object",
      "properties": {
        "address": {
          "type": "string",
          "default": "api.traceable.ai"
        },
        "token": {
          "type": "string"
        },
        "api_key": {
          "type": "string"
        },
        "tls": {
          "type": "boolean",
          "default": true
        },
        "proxy": {
          "type": "object",
          "required": [
            "host",
            "port"
          ],
          "properties": {
            "host": {
              "type": "string"
            },
            "port": {
              "type": "integer"
            },
            "user": {
              "type": "string"
            },
            "password": {
              "type": "string"
            }
          }
        },
        "queue_size": {
          "type": "integer",
          "default": 100
        },
        "retry_on_failure": {
          "type": "boolean",
          "default": true
        },
        "backoff_delay_ms": {
          "type": "integer",
          "default": 3000
        },
        "traces_address": {
          "type": "string"
        },
        "events_address": {
          "type": "string"
        },
        "iam_address": {
          "type": "string"
        },
        "metrics_address": {
          "type": "string"
        },
        "config_address": {
          "type": "string"
        }
      }
    },
    "opa": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "load_lib_path": {
          "type": "string"
        },
        "native_lib_path": {
          "type": "string"
        },
        "server": {
          "type": "string",
          "default": "http://opa.traceableai:8181/"
        },
        "polling_period": {
          "type": "integer",
          "default": 30
        },
        "skip_verify": {
          "type": "boolean",
          "default": false
        }
      }
    }
  }
}